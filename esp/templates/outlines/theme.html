{% extends "elements/html" %}

{% block title %}Home [MOCKUP]{% endblock %}
{% block stylesheets %}
<meta name="author" content="Tony Valderrama, Vincent Lee, and others" />
<link rel="stylesheet" type="text/css" href="/media/styles/theme.css" media="all" />
<link rel="stylesheet" type="text/css" href="/media/styles/theme-gen.css" media="all" />
{% endblock %}

{% block javascript %}
{{ block.super }}

    {# general dependencies on YUI #}
    <script type="text/javascript" src="/media/scripts/yui/yahoo-dom-event/yahoo-dom-event.js"></script> 
    {% if request.user.is_authenticated %}
        {# navbar depends on YUI #}
        <script type="text/javascript" src="/media/scripts/yui/animation/animation-min.js"></script> 
        <script type="text/javascript" src="/media/scripts/yui/connection/connection-min.js"></script>
        <script type="text/javascript" src="/media/scripts/yui/autocomplete/autocomplete-min.js"></script> 
        <script type="text/javascript" src="/media/scripts/yui/calendar/calendar-min.js"></script> 
        <script type="text/javascript" src="/media/scripts/yui/dragdrop/dragdrop-min.js"></script> 
        <script type="text/javascript" src="/media/scripts/yui/container/container-min.js"></script> 
        <script type="text/javascript" src="/media/scripts/yui/menu/menu-min.js"></script>

        <script type="text/javascript" src="/media/scripts/json.js"></script>
        <script type="text/javascript" src="/media/scripts/ddlist.js"></script>
    {% endif %}

<!--<script type="text/javascript" src="/media/scripts/jquery.js"> </script>-->
<script type="text/javascript">
YAHOO.util.Event.on(window, "load", function(){

// create behavior wrapper
var wrap = function(target, label) {
  if (!target) return;
  var flag = false;
  target.onfocus = function(){
    if (flag) {
      target.value = '';
      target.style.color = '#000000';
    }
  };
  target.onblur = function(){
    if (flag = (target.value == '')) {
      target.value = label;
      target.style.color = '#999999';
    }
  };
  target.onblur();
};

// set behavior on Username, Password, and Search fields
wrap(document.getElementById('login_user'),'Username');
wrap(document.getElementById('login_pswd'),'Password');
wrap(document.getElementById('search_field'),'Enter search term');

/*$('#menu li').each(function(i, item) {
  var item = $(item);
  item.bind('mouseover', function(){
    $('#page').removeClass().addClass(item.attr('className'));
  });
});*/

{% if request.user.is_authenticated %}
var showadmin = function(){
  this.innerHTML = '&ndash;';
  this.onclick = hideadmin;
  document.getElementById('adminbar_content').style.display = 'block';
};
var hideadmin = function(){
  this.innerHTML = '+';
  this.onclick = showadmin;
  document.getElementById('adminbar_content').style.display = 'none';
};

document.getElementById('adminbar_toggle').onclick = hideadmin;
{% endif %}

});

</script>

{% endblock %}

{% block body %}

{% if request.user.isAdministrator %}
<div id="adminbar">
  <div class="title">Admin Toolbar</div>
  <div id="adminbar_toggle">&ndash;</div>
  <div id="adminbar_content"></div>
</div>
<script type="text/javascript">
ESP = (function(){
  var loaded = false;
  var queued_modules = [];
  var adminbar = document.getElementById('adminbar_content');
  
  YAHOO.util.Event.on(window, "load", function(){
    loaded = true;
    for (var i = 0; i < queued_modules.length; i++) {
      ESP.registerAdminModule(queued_modules[i]);
    }
  });
  
  return {
    registerAdminModule: function(module) {
      if (loaded) {
        var module_wrap = document.createElement("div");
        var module_class = "adminbar_" + module.name;
        module_wrap.className = module_class;
        module_wrap.innerHTML =
			"<div class='title'>" + module.name + "</div>" +
			"<div id='" + module_class + "_toggle' class='toggle'>-</div>";

        var module_content = document.createElement("div");
	module_content.className = "content";
        if (module.content_html) {
	    module_content.innerHTML = module.content_html;
	} else {
	    module_content.appendChild(document.getElementById(module.content_target));
	}
        module_wrap.appendChild(module_content);
	
        adminbar.appendChild(module_wrap);
      } else {
        queued_modules.push(module);
      }
    }
  };
})();

ESP.registerAdminModule({
content_html:
'    <form id="user_search_form" name="user_search_form" method="get" action="/manage/userview">' +
'      <input type="text" id="user_search_field" name="username" />' +
'      <input type="submit" id="user_search_submit" name="search_submit" value="Find User"/>' +
'    </form>',
name: 'User Search'
});
</script>
{% endif %}

{% load main %}
<div id="page" class="{{ request.path|extract_theme }}">
  <div id="sidebar">
      <ul id="menu">
	{% with request.path|split:"/"|index:1 as split_url %}
	{% with split_url|notequal:"learn"|bool_and:request.user.isTeacher as default_flag %}
	{% if split_url|equal:"teach"|bool_or:default_flag %}
	<li id="tab_logo" class="yellowgreen" ><a href="/teach/index.html"></a></li>
	<li id="tab_splash" class="blue" ><a href="/teach/Splash/index.html">Splash</a></li>
	<li id="tab_spark" class="purple" ><a href="/teach/Spark/index.html">Spark</a></li>
	<li id="tab_hssp" class="red" ><a href="/teach/HSSP/index.html">HSSP</a></li>
	<li id="tab_satprep" class="orange" ><a href="/teach/SATPrep/index.html">SATPrep</a></li>
	<li id="tab_junction" class="yellow" ><a href="/teach/Junction/index.html">Junction</a></li>
	<li id="tab_delve" class="lightgreen" ><a href="/teach/Delve/index.html">Delve</a></li>
	<li id="tab_proveit" class="darkgreen" ><a href="/teach/ProveIt/index.html">ProveIt</a></li>
	{% else %}
	<li id="tab_logo" class="yellowgreen" ><a href="/learn/index.html"></a></li>
	<li id="tab_splash" class="blue" ><a href="/learn/Splash/index.html">Splash</a></li>
	<li id="tab_spark" class="purple" ><a href="/learn/Spark/index.html">Spark</a></li>
	<li id="tab_hssp" class="red" ><a href="/learn/HSSP/index.html">HSSP</a></li>
	<li id="tab_satprep" class="orange" ><a href="/learn/SATPrep/index.html">SATPrep</a></li>
	<li id="tab_junction" class="yellow" ><a href="/learn/Junction/index.html">Junction</a></li>
	<li id="tab_delve" class="lightgreen" ><a href="/learn/Delve/index.html">Delve</a></li>
	<li id="tab_proveit" class="darkgreen" ><a href="/learn/ProveIt/index.html">ProveIt</a></li>
	{% endif %}
	{% endwith %}
	{% endwith %}
	<li id="tab_myesp" class="grey" ><a href="/myesp/home/">Profile</a></li>
{% if request.user.isAdministrator %}
	<li id="tab_admin" class="black" ><a href="/manage/programs/">Admin</a></li>
{% endif %}
      </ul>
  </div>
  <div id="body">
    <div class="corners"><div class="ul"></div><div class="ur"></div><div class="dl"></div><div class="dr"></div></div>
    <div id="header">
      <div id="cross_link">
	{% with request.path|split:"/"|index:1 as split_url %}
	{% if split_url|notequal:"teach" %}
	<span class="teach inactive"><a href="/teach/index.html">Teach anything.</a></span>
	{% else %}
	<span class="teach"><a href="/teach/index.html">Teach anything.</a></span>
	{% endif %}
	{% if split_url|notequal:"learn" %}
	<span class="learn inactive"><a href="/learn/index.html">Learn anything.</a></span>
	{% else %}
	<span class="learn"><a href="/learn/index.html">Learn anything.</a></span>
	{% endif %}
	{% endwith %}
      </div>
      <div id="search_box">
	<form name="search_form" method="get" action="http://search.mit.edu/search">
	 <input type='hidden' name='site' value='mit' />
	 <input type='hidden' name='client' value='mit' />
	 <input type='hidden' name='proxystylesheet' value='mit' />
	 <input type='hidden' name='output' value='xml_no_dtd' />
	 <input type='hidden' name='as_dt' value='i' />
	 <input type='hidden' name='as_sitesearch' value='esp.mit.edu' />
	  <input type="text" id="search_field" name="q" />
	  <input type="submit" id="search_submit" name="search_submit" />
	</form>
      </div>
      <div id="contact_info">
	<span class="title">MIT Educational Studies Program</span>
      <span class="normal">84 Massachusetts Avenue, Room W20-467</span>
      <span class="normal">Cambridge, MA 02139</span>
      <span class="normal">Tel: 617-253-4882</span>
      <span class="normal"><a href="/about/contact.html">contact us</a></span>
      </div>
{% block login %}
<div id="login_box">

{% if not request.user.is_authenticated %}
<!-- login -->
<form name="login_form" id="login_form" method="post" action="/myesp/login/">
  <input type="hidden" name="next" value="{{ request.path }}" />
  <input type="text" id="login_user" name="username" />
  <input type="password" id="login_pswd" name="password" />
  <input type="submit" id="login_submit" name="login_submit" />
  <a href="/myesp/register" id="login_signup"></a>
</form>

{% else %}
<!-- logout -->
  Hello, {{ request.user.first_name }} {{ request.user.last_name }}!<br />
  (<a href="/myesp/signout/">Logout</a>)
{% endif %}

</div>
{% endblock %}
    </div>
    <div id="main">
      <div class="corners"><div class="ul"></div><div class="ur"></div><div class="dl"></div><div class="dr"></div></div>
{% block content_header %}

{% block secondary_nav %}
{% load navbar %}
{% navbar_gen %}
{% endblock %}

{% endblock %}

      <div id="content">
{% block content %}{% endblock %}
      </div>
    </div>
    <div id="footer">
      &copy; MIT Educational Studies Program, 2009
    </div>
  </div>
</div>

{% endblock %}
