{% comment %} <hr>
<p><font style="font-size: 18pt;"><center>
<a href="/learn/{{one}}/{{two}}/catalog">Click Here</a> to select your
classes!</center></font>
</p>
<hr>
<br /> {% endcomment %}
<p>
{% load render_qsd %}
{% inline_qsd_block program.anchor class_schedule_header_text request.user %}
Below is your class schedule for {{ program.niceName }}.  You can
<a href="/learn/{{one}}/{{two}}/catalog">click here</a> to view the full 
catalog, or you can use the course listing below.
{% end_inline_qsd_block %}
</p>

<p>  <b>Please note</b>: Your space in a class is saved immediately when it
appears in the schedule below.  However, please do
click the "Confirm" button below to mark your registration as complete and
receive instructions on how to get to the program and what to do when
you arrive. 
</p>

{% if not module.deadline_met %}
    <center>
    <div class="note">
    Note: Student registration is no longer open. Please use this page to view your schedule. {% if completedAll %}You can still click `Save' to view your receipt. {% endif %}
    </div>
    </center>
    <br />
{% endif %}

<link rel="stylesheet" type="text/css" href="/media/styles/forms.css" />

<div id="program_form">
<table cellpadding="3" class="fullwidth">
<tr>
    <th colspan="3">
    Classes for {{request.user.first_name}} {{request.user.last_name}} - ID: {{request.user.id}}
    </th>
</tr>
{% for timeslot in timeslots %}
    {% ifchanged timeslot.0.start.day %}
        <tr><th class="small" colspan="3" height="3" style="text-align: center;">Classes beginning on {{ timeslot.0.pretty_date }}</th></tr>
    {% endifchanged %}
    {% ifchanged timeslot.2 %}
        <tr><th class="small" colspan="3" height="3">Block {{ timeslot.2 }}</th></tr>
    {% endifchanged %}
    {% ifequal timeslot.0.event_type.description "Compulsory" %}
        <td width="25%" valign="top" align="center" class="compulsory_event_time">{{ timeslot.0.short_description }}</td>
        <td colspan="2" class="compulsory_event_desc">{{ timeslot.0.description }}</td>
    </tr>
    {% else %}
    <tr>
    <tr>
        <td width="25%" valign="top" align="center">{{ timeslot.0.short_description }}</td>
        
        <td style="vertical-align: top !important;">
        {% for cls in timeslot.1 %}
	{% comment %}{% if use_priority %}{% endcomment %}
            {% if not cls.section.verbs|length_is:0 %}
                <i>{% for v in cls.section.verbs %}{{ v.friendly_name }}{% if not forloop.last %}, {% endif %}{% endfor %}:</i>
            {% endif %}
	{% comment %}{% endif %}{% endcomment %}
	{{ cls.section.title }} 
            
            {% if request.user.onsite_local %}
                ({{ cls.section.prettyrooms|join:", " }})
            {% endif %}
            {% if not forloop.last %}<br />{% endif %}
        {% endfor %}
        {% if timeslot.1|length_is:0 %}
            Nothing Selected
        {% endif %}
        </td>
        
        {% if not timeslot.1|length_is:0 %}
            {% if module.deadline_met %}
            <td width='25%' align='center' style="vertical-align: top !important;">
          {% comment %} <input type="button" value="Edit My Schedule"
            onclick="window.location='/learn/{{one}}/{{two}}/catalog';">
          <br />Or: {% endcomment %} 
            {% for cls in timeslot.1 %}
                <a href="/learn/{{one}}/{{two}}/clearslot/{{timeslot.0.id}}?sec_id={{ cls.section.id }}">[remove]</a>
                {% if cls.changeable %}
                    <a href="/learn/{{one}}/{{two}}/changeslot/{{timeslot.0.id}}?sec_id={{ cls.section.id }}">[change section]</a>
                {% endif %}
                <br />
            {% endfor %}
            {% if timeslot.3 %}
                <a href="/learn/{{one}}/{{two}}/fillslot/{{timeslot.0.id}}">[add class]</a>
                {% if not timeslot.1|length_is:1 %}
                    <a href="/learn/{{one}}/{{two}}/clearslot/{{timeslot.0.id}}">[clear slot]</a>
                {% endif %}
            {% endif %}
            </td>
            {% else %}
            <!-- Allow removal of classes if the appropriate flag is set -->
            {% if allow_removal %}
            <td width='25%' align='center' style="vertical-align: top !important;">
            {% for cls in timeslot.1 %}
                <a href="/learn/{{one}}/{{two}}/clearslot/{{timeslot.0.id}}?sec_id={{ cls.section.id }}">[remove]</a><br />
            {% endfor %}
            </td>
            {% endif %}
            {% endif %}
        {% else %}
            {% if module.deadline_met %}
                <td width='20%' align='center'>
          {% comment %} <input type="button" value="Edit My Schedule"
          onclick="window.location='/learn/{{one}}/{{two}}/catalog';">
          <br />Or: {% endcomment %}
                <a href="/learn/{{one}}/{{two}}/fillslot/{{timeslot.0.id}}">[add class]</a>
                </td>
            {% endif %}	
        {% endif %}
    </tr>
    {% endifequal %}
{% endfor %}
</table> 
</div>

<br/>
