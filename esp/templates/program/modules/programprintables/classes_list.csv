{% load modules %}"Class Code","Class Title","Description (short)","Min Grade","Max Grade","Teachers","Teacher Phone #s",{% if program|hasModule:"TeacherModeratorModule" %}"{{ program.getModeratorTitle }}s","{{ program.getModeratorTitle }} Phone #s",{% endif %}"Room(s)","Time(s)","Status","Allow Late?"
{% for cls in classes %}"{{ cls.emailcode }}","{{ cls.title|addslashes }}","{% with info=cls.class_info|truncatewords_html:10 %}{{ info|addslashes }}{% endwith %}","{{ cls.grade_min }}","{{ cls.grade_max }}","{% for teacher in cls.teachers.all %}{{ teacher.name_last_first|addslashes }}{% if not forloop.last %}; {% endif %}{% endfor %}","{% for teacher in cls.teachers.all %}{{ teacher.getLastProfile.contact_user.phone_cell }}{% if not forloop.last %}; {% endif %}{% endfor %}",{% if program|hasModule:"TeacherModeratorModule" %}"{% for sec in cls.sections.all %}Section {{ sec.index }}: {% for moderator in sec.get_moderators %}{{ moderator.name_last_first|addslashes }}{% if not forloop.last %}; {% endif %}{% empty %}None{% endfor %}{% if not forloop.last %}; {% endif %}{% endfor %}","{% for sec in cls.sections.all %}Section {{ sec.index }}: {% for moderator in sec.get_moderators %}{% if moderator.getLastProfile.contact_user.phone_cell %}{{ moderator.getLastProfile.contact_user.phone_cell }}{% else %}Missing{% endif %}{% if not forloop.last %}; {% endif %}{% empty %}None{% endfor %}{% if not forloop.last %}; {% endif %}{% endfor %}",{% endif %}"{% for sec in cls.sections.all %}Section {{ sec.index }}: {% if not sec.prettyrooms|length_is:0 %}{{ sec.prettyrooms|join:", "}}{% else %} Unassigned{% endif %}{% if not forloop.last %}; {% endif %}{% endfor %}","{% for sec in cls.sections.all %}Section {{ sec.index }}: {% if not sec.prettyrooms|length_is:0 %}{{ sec.friendly_times|join:", "}}{% else %} Unassigned{% endif %}{% if not forloop.last %}; {% endif %}{% endfor %}","{{ cls.status_str|capfirst }}","{% if cls.allow_lateness %}Y{% else %}N{% endif %}"
{% endfor %}