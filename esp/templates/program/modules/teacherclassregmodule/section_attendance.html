{% extends "main.html" %}

{% block title %}Section Attendance{% if section %} for {{ section }}{% endif %}{% endblock %}

{% block stylesheets %}
    {{ block.super }}
    <link rel="stylesheet" href="/media/styles/forms.css" type="text/css" />
{% endblock %}

{% block content %}
{% load users %}

<h1>Section Attendance{% if section %} for <u>{{ section }}</u>{% endif %}</h1>

<p>
{% if section %}
Here is an attendance sheet for your section's students. Here you can see which students have checked in and submit attendance for your section. This section is scheduled for {{ section.friendly_times_with_date|join:", " }}. If you are looking for a different section, you can select it from the dropdown below.
{% else %}
Please select a section from the dropdown below.
{% endif %}
<br />
</p>

<center>
    <select name="secid" onchange="location.href='/teach/{{ one }}/{{ two }}/section_attendance/'+$j(this).children('option:selected').val()" style="width: 400px;">
        {% if not section %}
            <option disabled selected="selected">
                (Select a section)
            </option>
        {% endif %}
        {% for sec in user.taught_sections %}
            <option value="{{ sec.id }}" {% if sec == section %}selected="selected"{% endif %}>
                {{ sec }}: {{ sec.friendly_times_with_date|join:", " }}
            </option>
        {% endfor %}
    </select>
</center>

{% if section %}
<div id="program_form">
<form action="/teach/{{ one }}/{{ two }}/section_attendance/{{ section.id }}" method="post">
<input type="hidden" name="submitted">
<table align="center" width="400px">
<thead>
<tr>
 <th>
   #
 </th>
 <th>
  Student Name
 </th>
 <th>
  Student Grade
 </th>
 <th>
  School
 </th>
 <th>
  Checked In?
 </th>
 <th>
  Attending Section?
 </th>
</tr>
</thead>
<tbody>
{% for student in section.student_list %}
    <tr>
        <th class="small">{{ forloop.counter }}</th>
        <td>{{ student.name }}</td>
        <td>{{ student|getGradeForProg:program.id }}</td>
        <td>{{ student.getLastProfile.student_info.getSchool }}</td>
        <td align="center"><input type="checkbox"{% if student.checked_in %} checked{% endif %} disabled></td>
        <td align="center"><input name="attending" value="{{ student.id }}" type="checkbox"{% if student.attended %} checked{% endif %}></td>
    </tr>
{% endfor %}
<tr>
    <td colspan = "6" align="center">
        <input type="Submit" class="fancybutton" value="Submit Attendance" /><br />
    </td>
</tr>
</tbody>
</table>
</form>
</div>
{% endif %}

{% endblock %}
