{% extends "main.html" %}

{% block title %}{{program.niceName}} Registration{% endblock %}

{% block javascript %}
{{ block.super }}
<script type="text/javascript">
<!--
function submit_check()
{
    if (confirm('Your registration is incomplete, perhaps because you have not registered for an activity during each time block.  Please review each of the above steps.  Are sure that all of the above information is correct?'))
    {
        return true;
    }
    return false;
}

-->
</script>
{% endblock %}

{% block stylesheets %}
{{ block.super }}
<link rel="stylesheet" href="/media/styles/catalog.css" type="text/css" />
<link rel="stylesheet" href="/media/styles/progressbar.css" type="text/css" />
{% endblock %}

{% load subsection %}
{% block subsection %}
{% autoescape off %}{{ "Student Registration"|subsection }}{% endautoescape %}{% endblock %}

{% block content %}
<h1 class="catalog">Pick Classes, {{program.niceName}} </h1>

{% if not request.user.onsite_local %}
    <div id="catalog">
    {% if program.isFull %}
    {% if not canRegToFullProgram %}
    <div class="errormsg">
    This program is now full!  You can no longer register for it; you may only use this page to update currently-existing registrations.</div>
    {% endif %}
    {% endif %}
{% comment %} (removed for Cascade -rye 1-7-09)
    <p>
    Please complete the following steps to register for {{ program.niceName }}.
    When each step is completed, the corresponding box in the right-hand column will
    be &#8220;checked off&#8221;. <!-- After finishing all the steps, click the &#8220;Confirm&#8221;
    button at the bottom of the page. -->
    </p>{% endcomment %}

<!-- (also removed for Cascade) -rye 1-7-09)
<p>
  After finishing all the steps, click the &#8220;{% if isConfirmed %}View Receipt{% else %}Save!{% endif %}&#8221;
  button at the bottom of the page, and you'll be good to go.
</p> -->

{% load render_qsd %}
{% render_inline_qsd program.anchor "learn:studentregheader" request.user %}

    <table class="progressbar" align="center" width="400">
    <tr>
    <td><img src="/media/images/progress/left_fill.gif" /></td>
    {% for module in modules %}
    {% if module.isStep %}
    {% with module.fillProgressBar as moduleCompleted %}
    <td class="progress{% if moduleCompleted %}_fill{% endif %}">
    {% if module.useTemplate %}
    <a href="#module-{{ module.id }}">
    {% else %}
    <a href="{{ module.get_full_path }}">
    {% endif %}
    <img src="/media/images/progress/bar{% if moduleCompleted %}_fill{% endif %}.gif" 
        {% if moduleCompleted %}title="Done!" alt="Done!"{% else %}
        title="Not Done" alt="Not Done"{% endif %} /><br />
    </a>
    {% if module.useTemplate %}
    <a href="#module-{{ module.id }}" title="{{ module.module.link_title }}">
        {{ module.module.link_title }} 
        </a> <em>(below)</em>
    {% else %}
        {% autoescape off %}{{ module.makeLink }}{% endautoescape %}
    {% endif %}
    {% if not module.module.required %}{% if not module.hideNotRequired %}<br /><em>(optional)</em> {% endif %}{% endif %}
  </td>
    {% endwith %}
{% endif %}
{% endfor %}
    <td><img src="/media/images/progress/right{% if completedAll %}_fill{% endif %}.gif" /></td>
    </tr>
    </table>

{% endif %}

<br />

{% load render_qsd %}
{% render_inline_qsd program.anchor "learn:studentreg" request.user %}

{% for module in modules %}
{% if module.useTemplate %}
<a name="module-{{module.id}}"></a>
<br />
{% include module.getTemplate %}
{% endif %}
{% endfor %}
</div>
<br />

<!-- (also removing this for Cascade -rye 1-7-09)
{% if not request.user.onsite_local and not isConfirmed and coremodule.deadline_met %}
<center>
-->

{% if program.isFull %}{% if not canRegToFullProgram %}
<div class="errormsg">This program is now full!  You can no longer register for it; you may only use this page to update currently-existing registrations.</div>
{% endif %}{% else %}
<!--
{% if not completedAll %}
<div class="errormsg">
Please finish the required steps listed above (they will be checked off when they are completed). THEN, click on the <em>Confirm</em> button below (it will be active at this point).
{% else %}
<div class="info">
Please click <em>Confirm</em> below to confirm your registration into {{program.niceName}}.  Upon clicking this you will be given a receipt with further instructions!
{% endif %}
</div>
{% endif %}
-->
<!--
</center>
{% endif %}
-->
<center>

<a name="confirmreg"></a>

<form action="/learn/{{one}}/{{two}}/confirmreg" {% comment %}{% if not completedAll %}onsubmit="return submit_check();"{% endif %}{% endcomment %} method="post">
<input class="button" type="submit" value="Save!{% if not completedAll %} (incomplete){% endif %}" {% if not completedAll %}disabled{% endif %}/></form>
{% if isConfirmed %}
 | 
<form action="/learn/{{one}}/{{two}}/cancelreg" method="get">
<input class="button" type="submit" value="Cancel Registration" />
{% endif %}

</center>

<br />
{% render_inline_qsd program.anchor "learn:studentregfooter" request.user %}

{% endblock %}
