{% extends "main.html" %}

{% block title %}{{program.niceName}} Settings{% endblock %}

{% block xtrajs %}
    {{ block.super }}
    <script type="text/javascript" src="/media/scripts/expand_display.js"></script>
{% endblock %}

{% block stylesheets %}
    {{ block.super }}
    <link rel="stylesheet" href="/media/styles/forms.css" type="text/css" />
    <link rel="stylesheet" href="/media/styles/expand_display.css" type="text/css" />
{% endblock %}

{% block content %}

{% load render_qsd %}

<h1>Program Settings for {{ program.niceName }} (ID: {{ program.id }})</h1>

{% inline_program_qsd_block program "manage:main_top" %}
Welcome to the program settings page for {{ program.niceName }}. This page lists most of the settings that you may want to change to make the program run how you would like.
{% end_inline_program_qsd_block %}

{% for title, form in forms %}
<p class="dspsection">
<a href="javascript:void(0)" class="dsphead" onclick="expand_disp(this)">
   <span class="dspchar">+</span> <b>{{ title }}</b> (click to expand/contract)
</a>

<div class="dspcont">
  <div id="settings_form">
    <form action="{{ request.path }}" method="post">
    {% autoescape off %}
    {% if form.non_field_errors %}{{ form.non_field_errors }}{% endif %}
    <input id="id_form_name" name="form_name" type="hidden" value="{{ title }}">
    {% for fieldset in form.fieldsets %}
  
      <fieldset class="fieldset_{{ fieldset.name }}">
      {% if fieldset.legend %}
        <legend>{{ fieldset.legend }}</legend>
      {% endif %}
      {% if fieldset.description %}
        <p class="description">{{ fieldset.description }}</p>
      {% endif %}
      <table class="contact" align="center" width="550">
      {% for field in fieldset %}
  
       <tr>
        {% if field.is_hidden %}
         <td> {{ field }} </td>
         {% else %}
        {% if field.label  %}
        <td style="vertical-align:text-top;">{{ field.label }} </td>
        {% endif %}
         {% if field %}
          <td>  {{ field }} 
        {% endif %}
        {% if field.help_text %}
          <br/>
          <span> {{ field.help_text }} </span>
        {% endif %}
        {% for error in field.errors %}
        <br/>
         <span class='form_error'> {{ error }} </span>
        {% endfor %}
         </td>
         </tr>
  
        {% endif %}
      {% endfor %}
      </table>
  
      </fieldset>
    {% endfor %}
  
    {% endautoescape %}
    <table align="center">
      <tr> 
        <td colspan="2" class="submit">
          <br /><br /><br />
          <center><input class="fancybutton" type="submit" value="Save {{ title }}" /></center>
        </td>
      </tr>
    </table>
  </form>
  </div>
</div>
{% endfor %}

{% include "program/modules/admincore/returnlink.html" %}

{% endblock %}