{% if show_class %}
{% load latex %}
{% load smartypants %}
<div class="show_class">
  <table cellpadding="5" cellspacing="0" {% if errormsg %}style="background: #ccc;" class="class_error"{% endif %}>
    <tr>
      <th colspan="2" style="width: 70%;">
      {% if not prereg_url %}
        <a class="classtitle" href="{{ class.parent_program.get_learn_url }}studentreg/" title="Join this class!">
      {% endif %} {{ class.title|escape|teximages:150|smartypants }}
      {% if not prereg_url %} </a> {% endif %}
      </th>
      <th style="width: 30%;">
       <span class="teachers">
       {% for teacher in class.teachers %}
       <a href="/teach/teachers/{{ teacher.last_name|urlencode }}/{{ teacher.first_name|urlencode }}{{ teacher.getUserNum }}/bio.html" 
          title="Click for the biography of {{teacher.first_name }} {{teacher.last_name }}">
          {{ teacher.first_name }} {{teacher.last_name }}
       </a>{% if not forloop.last %},{% endif %}{% endfor %}
       </span>
       </th>
     </tr>
     <tr>
       <td colspan="3" class="info" {% if errormsg %}style="background: #eee;"{% endif %}>
         {{ class.class_info|escape|teximages:120|smartypants|linebreaksbr }}<br />
       {% if class.prereqs %}
       <br /><br />
       <em>*Prerequisites*</em>
       <p style="padding-left: 10px; font-style:italic;">
         {{ class.prereqs }}
       </p>
       {% endif %}
       </td>
     </tr>
    <tr {% if errormsg %}style="background: #eee;"{% endif %}>
      <td style="width: 50%;" valign="top" {% if errormsg %}style="background: #eee;"{% endif %}>
        <strong>Meeting Time{{ class.friendly_times|pluralize }}</strong>
        <br />
	  {{ class.friendly_times|join:"<br />" }}
        <br />
      </td>
 
      <td style="width: 50%;" colspan="2" {% if errormsg %}style="background: #eee;"{% endif %}>
         <strong>Grades:</strong>
           {{ class.grade_min }}--{{ class.grade_max }} <br />
         <strong>Enrollment:</strong>
           {{ class.num_students }} (max {{ class.class_size_max }})
      </td>
    </tr>
    {% if class.anchor.media_set.count %}
    <tr>
      <th colspan="3" class="materials">
       <b>Materials for this class include:</b> 
	<span class="doclist">
	{% for doc in class.docs_summary %}
	<a href="{{ doc.get_target_file_url}}">{{ doc.friendly_name }}</a>{% if not forloop.last %},{% endif %} 
	{% endfor %}
	</span>
	<br /><b><a href="{{ class.parent_program.get_learn_url }}class_docs/{{ class.id }}">Click here to view all {{ class.anchor.media_set.count }} documents for {{ class.title }}</a></b>
      </th>
     </tr>
    {% endif %}
{% if prereg_url %}
    <tr>
      <td colspan="3" style="text-align: center; padding:0; padding-left: 125px; height: 30px;" align="center" class="add_class">
     {% if errormsg %}
<span class="error" style="font-size: 16px;">{{ errormsg }}</span> 
{% if user.onsite_local %}
<br />
<form name="prereg_submitform" onsubmit="return submit_override_prereg('{{ class.id }}');" method="post" action="{{ prereg_url }}">
	  <input type="hidden" name="class_id" value="{{ class.id }}" />
  	  <input type="submit" name="action" value="Add this class anyway!"
                 id="submitbutton{{ class.id }}" />
</form>
{% endif %}

{% else %}
	<form name="prereg_submitform" onsubmit="return submit_prereg('{{ class.id }}');" method="post" action="{{ prereg_url }}">
	  <input type="hidden" name="class_id" value="{{ class.id }}" />
  	  <input type="submit" name="action" value="Add this class"
                 id="submitbutton{{ class.id }}" />
	</form>{% endif %}
      </td>
     </tr>{% endif %}
</table>

</div>
{% endif %}